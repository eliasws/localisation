(this.webpackJsonpdbe_localisation=this.webpackJsonpdbe_localisation||[]).push([[0],{16:function(n,e,t){},18:function(n,e,t){},19:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t(1),o=t.n(a),c=t(8),s=t.n(c),i=(t(16),t(9)),l=t(10),u=t(3),d=t.n(u),f=t(7),b=(t.p,t(18),t(4)),h=t.n(b),p=function(n,e,t,r,a,o){if(o=o||.5,n<Math.min(e,t))return Math.min(e,t)===e?r:a;if(n>Math.max(e,t))return Math.max(e,t)===e?r:a;n=t-n;var c,s=e,i=r,l={x:t,y:a},u=i+Math.abs(o)*(l.y-i),d=n/(l.x-s);return i*((c=d)*c)+u*function(n){return 2*n*(1-n)}(d)+l.y*function(n){return(1-n)*(1-n)}(d)},x=function(){var n=Object(f.a)(d.a.mark((function n(){var e;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://seg.solum-eslsystem.de/lbs/map/result?contents=true");case 2:return e=n.sent,n.abrupt("return",e.json());case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(n){return parseInt("0x"+n)};var v=function(){var n=Object(a.useState)([]),e=Object(l.a)(n,2),t=e[0],o=e[1];Object(a.useEffect)((function(){Object(f.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=o,n.next=3,x();case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()}),[]);var c=Object(a.useMemo)((function(){var n=Object(i.a)(Array(8)).map((function(n){return Array(5).fill(null)})),e=[];return t.length>0&&(console.log("SHELF",n),t.filter((function(n){return 1===n.anchorEnabled})).forEach((function(e){console.log("data.positionId",e.positionId);var t=0,r=0;switch(e.articleName[0]){case"Haribo":t=2,r=1;break;case"Herman Hollerith Zentrum":t=7,r=0;break;case"Gerolsteiner":t=0,r=0;break;case"Clubs Clubs":t=7,r=2;break;default:console.log("NEW ANCHOR FOUND!")}var a=e.positionId.split("_")[1];n[t][r]=e;var o=h.a.vector(t,r);h.a.addBeacon(a,o)})),t.filter((function(n){return 1!==n.anchorEnabled})).forEach((function(t){if(console.log("------------------------"),t.anchorInfo.length<3)e.push(t);else{t.anchorInfo.forEach((function(n){var e=m(n.rssi);h.a.setDistance(n.positionId.split("_")[1],e)}));var r=h.a.calculatePosition();console.log("TRILATERATION",r);var a=Math.round(p(r.x,-1e3,1e3,0,8)),o=Math.round(p(r.y,-1e3,1e3,0,5));console.log("INTERPOLATE X",a),console.log("INTERPOLATE Y",o),n[o][a]=t}}))),{shelf:n,unknown:e}}),[t]),s=c.shelf,u=c.unknown;console.log(t);var b=Object(a.useCallback)((function(n){return Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(r.jsx)("img",{className:"LabelImage",src:"data:image/png;base64,"+n.labelStatus.contents[0].content,alt:n.articleName[0]},n.mac),n.anchorInfo.map((function(n){return Object(r.jsx)("div",{children:n.positionId+":"+m(n.rssi)},n.positionId)}))]})}),[]);return Object(r.jsx)("div",{className:"App",children:Object(r.jsxs)("div",{className:"Container",children:[Object(r.jsx)("div",{className:"Shelf",children:s.map((function(n,e){return n.map((function(n,t){var a={};a.gridColumn=e+1,a.gridRow=t+1,n&&1===n.anchorEnabled&&(a.border="solid",a.borderRadius=3,a.borderColor="red");var o=t+1+"/"+(e+1);return n&&n.labelStatus.contents.length&&(o=b(n)),Object(r.jsx)("div",{style:a,className:"Label",children:o},t+e)}))}))}),"Unknown",Object(r.jsx)("div",{className:"Unknown",children:u.map((function(n){return Object(r.jsx)("div",{className:"UnknownCell",children:b(n)})}))})]})})},j=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,20)).then((function(e){var t=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;t(n),r(n),a(n),o(n),c(n)}))};s.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(v,{})}),document.getElementById("root")),j()},4:function(n,e){(function(){var n,t;n=[],t=function(n){return Math.pow(n,2)},e.vector=function(n,e){return{x:n,y:e}},e.beacons=n,e.setDistance=function(e,t){console.log("SET DISTANCE",e,t),n[e].dis=t},e.addBeacon=function(e,t){console.log("ADD INDEX",e),n[e]=t},e.calculatePosition=function(){var r,a;return n.length<3?(console.error("Error! Please add at least three beacons!"),e.vector(0,0)):(r=((t(n[0].x)+t(n[0].y)-t(n[1].x)-t(n[1].y)-t(n[0].dis)+t(n[1].dis))/(2*(n[0].y-n[1].y))-(t(n[0].x)+t(n[0].y)-t(n[2].x)-t(n[2].y)-t(n[0].dis)+t(n[2].dis))/(2*(n[0].y-n[2].y)))/((n[2].x-n[0].x)/(n[0].y-n[2].y)-(n[1].x-n[0].x)/(n[0].y-n[1].y)),a=(n[1].x-n[0].x)/(n[0].y-n[1].y)*r+(t(n[0].x)+t(n[0].y)-t(n[1].x)-t(n[1].y)-t(n[0].dis)+t(n[1].dis))/(2*(n[0].y-n[1].y)),e.vector(r,a))}}).call(this)}},[[19,1,2]]]);
//# sourceMappingURL=main.d9c00f9a.chunk.js.map